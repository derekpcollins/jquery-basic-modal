(function(a){a.fn.modal=function(d){var f=a.extend({closeModalClass:"close-modal",animation:null,animationDuration:400,offsetTop:null,backdropId:"modal-backdrop",backdropAnimation:false,backdropAnimationDuration:50,backdropZindex:100,backdropClose:true,escClose:true},d);var c=a('<div id="modal-backdrop" />').css({"height":"100%","left":0,"position":"fixed","top":0,"width":"100%","z-index":f.backdropZindex});if(f.backdropAnimation){c.css({"opacity":0})}function i(){a("body").prepend(c);if(f.backdropAnimation){c.animate({opacity:1},f.backdropAnimationDuration)}}function b(){if(f.backdropAnimation){c.animate({opacity:0},f.backdropAnimationDuration,function(){c.remove()})}else{c.remove()}}function h(j){if(f.offsetTop!==null&&f.offsetTop>=0){a(window).resize(function(){j.css({left:(a(window).width()-j.outerWidth())/2})})}else{a(window).resize(function(){j.css({left:(a(window).width()-j.outerWidth())/2,top:(a(window).height()-j.outerHeight())/2})})}a(window).resize()}function e(k){i();k.css({"position":"absolute","z-index":parseInt(f.backdropZindex)+1});if(f.animation==="fade"){k.fadeIn(f.animationDuration)}else{if(f.animation==="slideDown"){var j="";if(f.offsetTop!==""&&f.offsetTop>=0){j=f.offsetTop}else{j=(a(window).height()-k.outerHeight())/2}k.css({display:"block",opacity:0,top:-k.outerWidth()+"px"});k.animate({top:j+"px",opacity:1},f.animationDuration)}else{k.show()}}h(k)}function g(j){if(f.animation==="fade"){j.fadeOut(f.animationDuration,function(){b()})}else{if(f.animation==="slideDown"){j.stop().animate({top:-(j.outerWidth()+(a(window).height()-j.outerHeight())/2)+"px",opacity:0},f.animationDuration,function(){b();j.hide()})}else{j.hide();b()}}}return this.each(function(){var j=a(this);e(j);j.on("click","."+f.closeModalClass,function(k){k.preventDefault();g(j)});if(f.backdropClose===true){c.on("click",function(){g(j)})}if(f.escClose===true){a("html").on("keyup",function(k){if(k.keyCode===27){g(j)}})}})};a(document).on("click","[data-trigger-modal]",function(d){d.preventDefault();var e=a(d.target),c=e.attr("data-trigger-modal"),b=e.attr("data-modal-options");if(b){b=a.parseJSON(b)}a("#"+c).modal(b)})})(jQuery);